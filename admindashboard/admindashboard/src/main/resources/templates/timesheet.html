<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Timesheet - WhiteCircle</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bs-primary: #1e3a8a; /* Navy Blue Theme */
            --bg-color: #f8fafc;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: #334155;
        }

        /* --- HEADER --- */
        .top-header {
            background: white; border-bottom: 1px solid #e2e8f0;
            padding: 10px 30px;
            position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.03);
            height: 80px;
        }
        .btn-back-home {
            background-color: var(--bs-primary); color: white;
            border-radius: 10px; padding: 10px 24px; font-weight: 600;
            font-size: 0.85rem; text-decoration: none; display: flex; align-items: center;
            box-shadow: 0 4px 10px rgba(30, 58, 138, 0.2); transition: all 0.3s ease;
        }
        .btn-back-home:hover { background-color: #172554; transform: translateY(-2px); color: white; }

        /* --- CONTAINER --- */
        .main-container {
            max-width: 1200px; margin: 100px auto 40px; padding: 0 20px;
        }

        /* --- GLOBAL CARD STYLES (Hover & Shadow) --- */
        .hover-card {
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 4px 6px rgba(0,0,0,0.02);
            position: relative;
        }
        .hover-card:hover {
            transform: translateY(-8px); /* Lift effect */
            box-shadow: 0 15px 30px rgba(30, 58, 138, 0.15); /* Deep shadow */
            z-index: 10;
        }

        /* --- 1. ACTION CARDS (Top Row) --- */
        .action-card {
            background: white;
            /* ADDED: Navy Border */
            border: 1.5px solid var(--bs-primary);
            border-radius: 12px;
            /* CHANGED: Increased padding by 1/3 (was 20px, now 35px) */
            padding: 35px 25px;
            height: 100%;
            display: flex; align-items: center; gap: 20px;
            cursor: pointer;
        }

        .ac-icon {
            /* Increased icon size slightly */
            width: 60px; height: 60px; border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.8rem; flex-shrink: 0;
        }

        /* Specific Colors */
        .ac-create .ac-icon { background: #eff6ff; color: var(--bs-primary); }
        .ac-template .ac-icon { background: #fdf2f8; color: #db2777; }
        .ac-report .ac-icon { background: #f0fdf4; color: #15803d; }

        /* --- 2. CALENDAR VIEW --- */
        .calendar-card {
            background: white; border: 1px solid #e2e8f0; border-radius: 16px;
            overflow: hidden; height: 100%;
        }
        .calendar-header {
            background: var(--bs-primary); color: white; padding: 10px 20px;
            display: flex; justify-content: space-between; align-items: center;
        }

        /* Grid */
        .cal-grid-header {
            display: grid; grid-template-columns: repeat(7, 1fr); gap: 0;
            background: #f8fafc; border-bottom: 1px solid #e2e8f0;
        }
        .cal-grid-body {
            display: grid; grid-template-columns: repeat(7, 1fr); gap: 0;
        }

        .cal-head {
            text-align: center; padding: 8px; font-weight: 600; color: #64748b; font-size: 0.8rem;
        }

        .cal-day {
            /* CHANGED: Reduced height from 80px to 60px */
            min-height: 60px;
            padding: 5px 8px;
            border-right: 1px solid #f1f5f9; border-bottom: 1px solid #f1f5f9;
            position: relative; transition: background 0.2s;
            display: flex; flex-direction: column;
        }
        .cal-day:hover { background: #f8fafc; }

        .day-num { font-weight: 600; font-size: 0.85rem; color: #334155; }
        .day-badge {
            margin-top: auto; font-size: 0.65rem; padding: 1px 4px; border-radius: 3px; display: inline-block; align-self: flex-start;
        }
        .badge-filled { background: #dcfce7; color: #166534; }
        .badge-draft { background: #fef3c7; color: #92400e; }
        .current-day { background-color: #eff6ff; } /* Highlight for today */

        /* --- 3. RECENT LIST UPDATES --- */
        .recent-card {
            background: white;
            border: 1.5px solid var(--bs-primary);
            border-radius: 16px;
            overflow: hidden;
            height: 100%;
            /* Removed generic hover-card class from HTML to stop whole card hover */
        }

        /* NEW: Header matches Calendar style */
        .recent-header {
            background: var(--bs-primary);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .view-all-link {
            font-size: 0.85rem;
            color: #bfdbfe; /* Lighter blue text */
            text-decoration: none;
            font-weight: 600;
            position: relative;
        }

        /* Underline effect on hover */
        .view-all-link:hover {
            color: white;
            text-decoration: underline;
            text-underline-offset: 4px;
        }

        .recent-item {
            padding: 15px 20px;
            border-bottom: 1px solid #f1f5f9;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s;
            cursor: pointer;
        }
        /* Only rows hover, not the whole container */
        .recent-item:hover { background: #f8fafc; }
        .recent-item:last-child { border-bottom: none; }

        /* --- TODAY HIGHLIGHT UPDATE --- */
        .current-day {
            background-color: #e0f2fe; /* Distinct light blue background */
            border: 2px solid var(--bs-primary) !important; /* Navy border */
            z-index: 5; /* Brings it above neighbors */
        }
        .current-day .day-num {
            color: var(--bs-primary);
            font-weight: 800;
            font-size: 1.1rem; /* Larger font */
        }

        /* --- CLICK EFFECT FOR TOP CARDS --- */
        .action-card:active {
            transform: scale(0.98); /* Slight shrink on click */
            background-color: #f1f5f9; /* Flash color */
            border-color: #1e3a8a;
        }

        .ri-date { font-weight: 600; color: #1e293b; font-size: 0.95rem; }
        .ri-hours { font-size: 0.8rem; color: #64748b; margin-top: 2px; }

        .status-pill {
            padding: 5px 12px; border-radius: 50px; font-size: 0.75rem; font-weight: 700;
        }
        .st-approved { background: #dcfce7; color: #15803d; }
        .st-submitted { background: #e0e7ff; color: #3730a3; }
        .st-draft { background: #fff7ed; color: #c2410c; }

    </style>
</head>
<body>

<header class="top-header">
    <div class="d-flex align-items-center">
        <img src="/images/wcg-logo.jpg" alt="Logo" style="height: 60px; border-radius: 6px;">
        <span class="fw-bold ms-2 text-dark fs-4">ERP & TIMESHEET</span>
    </div>
    <a href="/employee/dashboard" class="btn-back-home">
        <i class="fas fa-arrow-left me-2"></i> Back to Home
    </a>
</header>

<div class="main-container">

    <div class="row g-4 mb-4">

        <div class="col-md-4">
            <div class="action-card hover-card ac-create">
                <div class="ac-icon"><i class="fas fa-plus"></i></div>
                <div>
                    <h5 class="fw-bold text-dark mb-1">Create Timecard</h5>
                    <small class="text-muted">Log hours for this week</small>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="action-card hover-card ac-template">
                <div class="ac-icon"><i class="fas fa-copy"></i></div>
                <div>
                    <h5 class="fw-bold text-dark mb-1">Use Template</h5>
                    <small class="text-muted">Pre-fill from projects</small>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="action-card hover-card ac-report">
                <div class="ac-icon"><i class="fas fa-file-invoice"></i></div>
                <div>
                    <h5 class="fw-bold text-dark mb-1">Timesheet Report</h5>
                    <small class="text-muted">Monthly summary</small>
                </div>
            </div>
        </div>
    </div>

    <div class="row g-4">

        <div class="col-lg-8">
            <div class="calendar-card hover-card">
                <div class="calendar-header">
                    <div class="fw-bold" id="monthYearDisplay" style="font-size: 1.1rem;">
                        <i class="fas fa-calendar-alt me-2"></i> January 2026
                    </div>
                    <div>
                        <button class="btn btn-sm btn-outline-light border-0" onclick="changeMonth(-1)"><i class="fas fa-chevron-left"></i></button>
                        <button class="btn btn-sm btn-outline-light border-0" onclick="changeMonth(1)"><i class="fas fa-chevron-right"></i></button>
                        <button class="btn btn-sm btn-light text-primary fw-bold ms-2" onclick="goToToday()" style="font-size: 0.75rem;">Today</button>
                    </div>
                </div>

                <div class="cal-grid-header">
                    <div class="cal-head">Sun</div>
                    <div class="cal-head">Mon</div>
                    <div class="cal-head">Tue</div>
                    <div class="cal-head">Wed</div>
                    <div class="cal-head">Thu</div>
                    <div class="cal-head">Fri</div>
                    <div class="cal-head">Sat</div>
                </div>

                <div class="cal-grid-body" id="calendarGrid">
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="recent-card">
                <div class="recent-header">
                    <h6 class="fw-bold m-0"><i class="fas fa-history me-2"></i>Recent Timecards</h6>
                    <a href="#" class="view-all-link">View All</a>
                </div>

                <div class="d-flex flex-column">
                    <div class="recent-item">
                        <div>
                            <div class="ri-date">26 Jan - 01 Feb</div>
                            <div class="ri-hours">Current Week &bull; 16 Hours logged</div>
                        </div>
                        <span class="status-pill st-draft">Draft</span>
                    </div>
                    <div class="recent-item">
                        <div>
                            <div class="ri-date">19 Jan - 25 Jan</div>
                            <div class="ri-hours">Total: 40:00 Hours</div>
                        </div>
                        <span class="status-pill st-submitted">Submitted</span>
                    </div>
                    <div class="recent-item">
                        <div>
                            <div class="ri-date">12 Jan - 18 Jan</div>
                            <div class="ri-hours">Total: 40:00 Hours</div>
                        </div>
                        <span class="status-pill st-approved">Approved</span>
                    </div>
                    <div class="recent-item">
                        <div>
                            <div class="ri-date">05 Jan - 11 Jan</div>
                            <div class="ri-hours">Total: 40:00 Hours</div>
                        </div>
                        <span class="status-pill st-approved">Approved</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    let currentDate = new Date(); // Start with today

    function renderCalendar() {
        const year = currentDate.getFullYear();
        const month = currentDate.getMonth();

        const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

        // Update Header
        document.getElementById('monthYearDisplay').innerHTML = `<i class="fas fa-calendar-alt me-2"></i> ${monthNames[month]} ${year}`;

        const firstDay = new Date(year, month, 1);
        const lastDay = new Date(year, month + 1, 0);
        const totalDays = lastDay.getDate();
        const startDayIndex = firstDay.getDay(); // 0 (Sun) to 6 (Sat)
        const today = new Date();

        let html = '';

        // Empty cells for days before the 1st
        for (let i = 0; i < startDayIndex; i++) {
            html += `<div class="cal-day bg-light"></div>`;
        }

        // Days 1 to Total
        for (let day = 1; day <= totalDays; day++) {
            // Check if it's today
            const isToday = (day === today.getDate() && month === today.getMonth() && year === today.getFullYear());
            const dayClass = isToday ? 'cal-day current-day' : 'cal-day';

            // Add dummy data for visuals (just an example of logic)
            let badge = '';
            const dayOfWeek = new Date(year, month, day).getDay();

            // Add "8h" badge for weekdays in the past
            if (dayOfWeek !== 0 && dayOfWeek !== 6 && day < today.getDate()) {
                badge = `<span class="day-badge badge-filled">8h</span>`;
            } else if (isToday) {
                badge = `<span class="day-badge badge-draft">Draft</span>`;
            }

            html += `
                <div class="${dayClass}">
                    <span class="day-num ${isToday ? 'text-primary' : ''}">${day}</span>
                    ${badge}
                </div>
            `;
        }

        document.getElementById('calendarGrid').innerHTML = html;
    }
    function changeMonth(step) {
        currentDate.setMonth(currentDate.getMonth() + step);
        renderCalendar();
    }
    function goToToday() {
        currentDate = new Date();
        renderCalendar();
    }
    // Initialize on load
    document.addEventListener('DOMContentLoaded', renderCalendar);

    <script>
    // Force all date inputs to have a maximum year of 9999 (4 digits)
    document.querySelectorAll('input[type="date"]').forEach(function(dateInput) {
        if (!dateInput.getAttribute('max')) {
            dateInput.setAttribute('max', '9999-12-31');
        }
    });
</script>
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>