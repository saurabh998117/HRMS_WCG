<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password - WhiteCircle</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bs-primary: #1e3a8a; /* Navy Blue Theme */
            --bg-color: #f3f4f6;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: #334155;
            padding-top: 80px;
        }

        /* --- HEADER DESIGN --- */
        .top-nav-bar {
            position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
            background: white;
            height: 80px;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 30px;
            border-bottom: 1px solid #e2e8f0;
            box-shadow: 0 10px 25px -5px rgba(30, 58, 138, 0.1),
                        0 8px 10px -6px rgba(30, 58, 138, 0.1);
        }

        .brand-section {
            display: flex; align-items: center;
            color: #1e3a8a;
            font-weight: 700;
            font-size: 1.6rem;
            min-width: 250px;
        }

        .btn-back {
            background: #1e3a8a; color: white;
            padding: 8px 20px; border-radius: 6px; font-size: 0.85rem; text-decoration: none;
            border: none; transition: all 0.2s;
            box-shadow: 0 2px 5px rgba(30, 58, 138, 0.2);
        }
        .btn-back:hover { background: #172554; color: white; transform: translateY(-1px); }

        /* --- MAIN CARD --- */
        .password-card {
            /* Wider for better spacing */
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;

            /* UPDATED: Full Navy Border */
            border: 2px solid var(--bs-primary);

            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            padding: 35px;

            /* Animation Effect */
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .password-card:hover {
            transform: translateY(-5px); /* Lift effect */
            box-shadow: 0 15px 35px rgba(30, 58, 138, 0.1);
        }

        .card-header-text { color: var(--bs-primary); font-weight: 800; margin-bottom: 5px; }

        .form-label { font-weight: 600; color: #475569; font-size: 0.9rem; margin-bottom: 5px; }

        .input-group-text { background: #f8fafc; color: #64748b; border-right: none; border-color: #cbd5e1; }
        .form-control { border-left: none; background: #f8fafc; border-color: #cbd5e1; }

        /* Focus Glow Effect */
        .form-control:focus {
            background: white;
            box-shadow: 0 0 0 4px rgba(30, 58, 138, 0.1);
            border-color: var(--bs-primary);
        }

        .btn-reveal {
            border: 1px solid #cbd5e1; border-left: none; background: #f8fafc; color: #64748b;
            border-top-right-radius: 6px !important; border-bottom-right-radius: 6px !important;
        }
        .btn-reveal:hover { background: #e2e8f0; color: #334155; }

        /* Strength Meter */
        .strength-meter {
            height: 5px; border-radius: 5px; background: #e2e8f0; margin-top: 10px; overflow: hidden;
        }
        .strength-bar {
            height: 100%; width: 0%; transition: width 0.3s, background-color 0.3s;
        }

        .req-list { list-style: none; padding: 0; margin-top: 10px; display: flex; flex-wrap: wrap; gap: 10px; }
        .req-item { font-size: 0.75rem; color: #94a3b8; display: flex; align-items: center; }
        .req-item i { margin-right: 5px; font-size: 0.7rem; }

        .valid { color: #16a34a; font-weight: 600; }
        .valid i { color: #16a34a; }

        .security-tip {
            background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 8px;
            padding: 12px; margin-bottom: 25px; display: flex; gap: 12px;
        }

        .input-group.is-invalid { border: 1px solid #dc3545; border-radius: 6px; }
        .invalid-feedback { font-size: 0.8rem; margin-top: 4px; }

        /* --- SHINING BUTTON EFFECT --- */
        .btn-shine {
            position: relative;
            overflow: hidden; /* Keeps the shine inside the button */
            z-index: 1;
        }

        /* The Shine Element (Invisible by default) */
        .btn-shine::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%; /* Start off-screen */
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.4),
                transparent
            );
            transform: skewX(-25deg); /* Slant the light */
            transition: 0.5s;
        }

        /* The Animation Trigger */
        .btn-shine:hover::after {
            animation: shine-sweep 0.75s;
        }

        @keyframes shine-sweep {
            100% {
                left: 150%; /* Move completely across to the right */
            }
        }

    </style>
</head>
<body>

<nav class="top-nav-bar">
    <div class="brand-section">
        <i class="fas fa-lock me-3 text-primary"></i>
        Password Reset
    </div>
    <a href="/employee/dashboard" class="btn-back">
        <i class="fas fa-arrow-left me-2"></i>Back to Home
    </a>
</nav>

<div class="container mb-5" style="margin-top: 50px;">

    <div class="password-card">

        <h4 class="card-header-text">Create New Password</h4>
        <p class="text-muted small mb-3">Your new password must be different from previous used passwords.</p>

        <div class="security-tip">
            <i class="fas fa-shield-alt text-primary fs-5 mt-1"></i>
            <div>
                <h6 class="fw-bold text-primary mb-1" style="font-size: 0.9rem;">Security Requirement</h6>
                <p class="mb-0 text-muted" style="font-size: 0.8rem;">
                    To keep your account safe, update your password every 90 days.
                </p>
            </div>
        </div>

        <form class="needs-validation" novalidate>

            <div class="mb-3">
                <label class="form-label">Current Password <span class="text-danger">*</span></label>
                <div class="input-group has-validation">
                    <span class="input-group-text"><i class="fas fa-key"></i></span>
                    <input type="password" class="form-control" id="currentPass" placeholder="Enter current password" required>
                    <button class="btn btn-reveal" type="button" onclick="togglePass('currentPass')">
                        <i class="far fa-eye"></i>
                    </button>
                    <div class="invalid-feedback">
                        Please enter your current password.
                    </div>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">New Password <span class="text-danger">*</span></label>
                <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-lock"></i></span>
                    <input type="password" class="form-control" id="newPass" placeholder="Enter new password" onkeyup="checkStrength()" required>
                    <button class="btn btn-reveal" type="button" onclick="togglePass('newPass')">
                        <i class="far fa-eye"></i>
                    </button>
                </div>

                <div class="strength-meter">
                    <div class="strength-bar" id="strengthBar"></div>
                </div>

                <ul class="req-list">
                    <li class="req-item" id="req-len"><i class="fas fa-circle"></i> 8+ Chars</li>
                    <li class="req-item" id="req-num"><i class="fas fa-circle"></i> Number</li>
                    <li class="req-item" id="req-sym"><i class="fas fa-circle"></i> Symbol</li>
                    <li class="req-item" id="req-cap"><i class="fas fa-circle"></i> Uppercase</li>
                </ul>
            </div>

            <div class="mb-4">
                <label class="form-label">Confirm New Password <span class="text-danger">*</span></label>
                <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-check-double"></i></span>
                    <input type="password" class="form-control" id="confirmPass" placeholder="Re-enter new password" required>
                </div>
            </div>

            <div class="d-grid gap-2">
                <button type="submit" class="btn btn-primary fw-bold py-2 btn-shine" style="background: #1e3a8a;">
                    Update Password
                </button>
                <a href="/employee/dashboard" class="btn btn-light text-muted fw-bold py-2">Cancel</a>
            </div>
        </form>

    </div>
</div>

<script>
    function togglePass(inputId) {
        const input = document.getElementById(inputId);
        const icon = event.currentTarget.querySelector('i');
        if (input.type === "password") {
            input.type = "text";
            icon.classList.remove('fa-eye');
            icon.classList.add('fa-eye-slash');
        } else {
            input.type = "password";
            icon.classList.remove('fa-eye-slash');
            icon.classList.add('fa-eye');
        }
    }

    (function () {
        'use strict'
        var forms = document.querySelectorAll('.needs-validation')
        Array.prototype.slice.call(forms)
            .forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }
                    form.classList.add('was-validated')
                }, false)
            })
    })()

    function checkStrength() {
        const password = document.getElementById('newPass').value;
        const bar = document.getElementById('strengthBar');

        const hasLen = password.length >= 8;
        const hasNum = /\d/.test(password);
        const hasSym = /[!@#$%^&*(),.?":{}|<>]/.test(password);
        const hasCap = /[A-Z]/.test(password);

        updateReq('req-len', hasLen);
        updateReq('req-num', hasNum);
        updateReq('req-sym', hasSym);
        updateReq('req-cap', hasCap);

        let score = 0;
        if(hasLen) score++;
        if(hasNum) score++;
        if(hasSym) score++;
        if(hasCap) score++;

        const width = (score / 4) * 100;
        bar.style.width = width + '%';

        if(score <= 1) bar.style.backgroundColor = '#ef4444';
        else if(score === 2 || score === 3) bar.style.backgroundColor = '#f59e0b';
        else bar.style.backgroundColor = '#22c55e';
    }

    function updateReq(id, isValid) {
        const el = document.getElementById(id);
        const icon = el.querySelector('i');
        if(isValid) {
            el.classList.add('valid');
            icon.classList.remove('fa-circle');
            icon.classList.add('fa-check-circle');
        } else {
            el.classList.remove('valid');
            icon.classList.add('fa-circle');
            icon.classList.remove('fa-check-circle');
        }
    }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>